[
    {
        "name": "tornado.test.httpclient_test.HelloWorldHandler.get#37",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HelloWorldHandler",
        "signature": "tornado.test.httpclient_test.HelloWorldHandler.get(self)",
        "snippet": "    def get(self):\n        name = self.get_argument(\"name\", \"world\")\n        self.set_header(\"Content-Type\", \"text/plain\")\n        self.finish(\"Hello %s!\" % name)",
        "begin_line": 37,
        "end_line": 40,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.PostHandler.post#44",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.PostHandler",
        "signature": "tornado.test.httpclient_test.PostHandler.post(self)",
        "snippet": "    def post(self):\n        self.finish(\n            \"Post arg1: %s, arg2: %s\"\n            % (self.get_argument(\"arg1\"), self.get_argument(\"arg2\"))\n        )",
        "begin_line": 44,
        "end_line": 48,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.PutHandler.put#52",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.PutHandler",
        "signature": "tornado.test.httpclient_test.PutHandler.put(self)",
        "snippet": "    def put(self):\n        self.write(\"Put body: \")\n        self.write(self.request.body)",
        "begin_line": 52,
        "end_line": 54,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.RedirectHandler.prepare#58",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.RedirectHandler",
        "signature": "tornado.test.httpclient_test.RedirectHandler.prepare(self)",
        "snippet": "    def prepare(self):\n        self.write(\"redirects can have bodies too\")\n        self.redirect(\n            self.get_argument(\"url\"), status=int(self.get_argument(\"status\", \"302\"))\n        )",
        "begin_line": 58,
        "end_line": 62,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.RedirectWithoutLocationHandler.prepare#66",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.RedirectWithoutLocationHandler",
        "signature": "tornado.test.httpclient_test.RedirectWithoutLocationHandler.prepare(self)",
        "snippet": "    def prepare(self):\n        # For testing error handling of a redirect with no location header.\n        self.set_status(301)\n        self.finish()",
        "begin_line": 66,
        "end_line": 69,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.ChunkHandler.get#74",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.ChunkHandler",
        "signature": "tornado.test.httpclient_test.ChunkHandler.get(self)",
        "snippet": "    def get(self):\n        self.write(\"asdf\")\n        self.flush()\n        # Wait a bit to ensure the chunks are sent and received separately.\n        yield gen.sleep(0.01)\n        self.write(\"qwer\")",
        "begin_line": 74,
        "end_line": 79,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.AuthHandler.get#83",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.AuthHandler",
        "signature": "tornado.test.httpclient_test.AuthHandler.get(self)",
        "snippet": "    def get(self):\n        self.finish(self.request.headers[\"Authorization\"])",
        "begin_line": 83,
        "end_line": 84,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.CountdownHandler.get#88",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.CountdownHandler",
        "signature": "tornado.test.httpclient_test.CountdownHandler.get(self, count)",
        "snippet": "    def get(self, count):\n        count = int(count)\n        if count > 0:\n            self.redirect(self.reverse_url(\"countdown\", count - 1))\n        else:\n            self.write(\"Zero\")",
        "begin_line": 88,
        "end_line": 93,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.EchoPostHandler.post#97",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.EchoPostHandler",
        "signature": "tornado.test.httpclient_test.EchoPostHandler.post(self)",
        "snippet": "    def post(self):\n        self.write(self.request.body)",
        "begin_line": 97,
        "end_line": 98,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.UserAgentHandler.get#102",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.UserAgentHandler",
        "signature": "tornado.test.httpclient_test.UserAgentHandler.get(self)",
        "snippet": "    def get(self):\n        self.write(self.request.headers.get(\"User-Agent\", \"User agent not set\"))",
        "begin_line": 102,
        "end_line": 103,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.ContentLength304Handler.get#107",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.ContentLength304Handler",
        "signature": "tornado.test.httpclient_test.ContentLength304Handler.get(self)",
        "snippet": "    def get(self):\n        self.set_status(304)\n        self.set_header(\"Content-Length\", 42)",
        "begin_line": 107,
        "end_line": 109,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.ContentLength304Handler._clear_headers_for_304#111",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.ContentLength304Handler",
        "signature": "tornado.test.httpclient_test.ContentLength304Handler._clear_headers_for_304(self)",
        "snippet": "    def _clear_headers_for_304(self):\n        # Tornado strips content-length from 304 responses, but here we\n        # want to simulate servers that include the headers anyway.\n        pass",
        "begin_line": 111,
        "end_line": 114,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.PatchHandler.patch#118",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.PatchHandler",
        "signature": "tornado.test.httpclient_test.PatchHandler.patch(self)",
        "snippet": "    def patch(self):\n        \"Return the request payload - so we can check it is being kept\"\n        self.write(self.request.body)",
        "begin_line": 118,
        "end_line": 120,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.AllMethodsHandler.method#126",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.AllMethodsHandler",
        "signature": "tornado.test.httpclient_test.AllMethodsHandler.method(self)",
        "snippet": "    def method(self):\n        self.write(self.request.method)",
        "begin_line": 126,
        "end_line": 127,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SetHeaderHandler.get#133",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SetHeaderHandler",
        "signature": "tornado.test.httpclient_test.SetHeaderHandler.get(self)",
        "snippet": "    def get(self):\n        # Use get_arguments for keys to get strings, but\n        # request.arguments for values to get bytes.\n        for k, v in zip(self.get_arguments(\"k\"), self.request.arguments[\"v\"]):\n            self.set_header(k, v)",
        "begin_line": 133,
        "end_line": 137,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.get_app#146",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.get_app(self)",
        "snippet": "    def get_app(self):\n        return Application(\n            [\n                url(\"/hello\", HelloWorldHandler),\n                url(\"/post\", PostHandler),\n                url(\"/put\", PutHandler),\n                url(\"/redirect\", RedirectHandler),\n                url(\"/redirect_without_location\", RedirectWithoutLocationHandler),\n                url(\"/chunk\", ChunkHandler),\n                url(\"/auth\", AuthHandler),\n                url(\"/countdown/([0-9]+)\", CountdownHandler, name=\"countdown\"),\n                url(\"/echopost\", EchoPostHandler),\n                url(\"/user_agent\", UserAgentHandler),\n                url(\"/304_with_content_length\", ContentLength304Handler),\n                url(\"/all_methods\", AllMethodsHandler),\n                url(\"/patch\", PatchHandler),\n                url(\"/set_header\", SetHeaderHandler),\n            ],\n            gzip=True,\n        )",
        "begin_line": 146,
        "end_line": 165,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_patch_receives_payload#167",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_patch_receives_payload(self)",
        "snippet": "    def test_patch_receives_payload(self):\n        body = b\"some patch data\"\n        response = self.fetch(\"/patch\", method=\"PATCH\", body=body)\n        self.assertEqual(response.code, 200)\n        self.assertEqual(response.body, body)",
        "begin_line": 167,
        "end_line": 171,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_hello_world#174",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_hello_world(self)",
        "snippet": "    def test_hello_world(self):\n        response = self.fetch(\"/hello\")\n        self.assertEqual(response.code, 200)\n        self.assertEqual(response.headers[\"Content-Type\"], \"text/plain\")\n        self.assertEqual(response.body, b\"Hello world!\")\n        self.assertEqual(int(response.request_time), 0)\n\n        response = self.fetch(\"/hello?name=Ben\")\n        self.assertEqual(response.body, b\"Hello Ben!\")",
        "begin_line": 174,
        "end_line": 182,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_streaming_callback#184",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_streaming_callback(self)",
        "snippet": "    def test_streaming_callback(self):\n        # streaming_callback is also tested in test_chunked\n        chunks = []  # type: typing.List[bytes]\n        response = self.fetch(\"/hello\", streaming_callback=chunks.append)\n        # with streaming_callback, data goes to the callback and not response.body\n        self.assertEqual(chunks, [b\"Hello world!\"])\n        self.assertFalse(response.body)",
        "begin_line": 184,
        "end_line": 190,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_post#192",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_post(self)",
        "snippet": "    def test_post(self):\n        response = self.fetch(\"/post\", method=\"POST\", body=\"arg1=foo&arg2=bar\")\n        self.assertEqual(response.code, 200)\n        self.assertEqual(response.body, b\"Post arg1: foo, arg2: bar\")",
        "begin_line": 192,
        "end_line": 195,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_chunked#197",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_chunked(self)",
        "snippet": "    def test_chunked(self):\n        response = self.fetch(\"/chunk\")\n        self.assertEqual(response.body, b\"asdfqwer\")\n\n        chunks = []  # type: typing.List[bytes]\n        response = self.fetch(\"/chunk\", streaming_callback=chunks.append)\n        self.assertEqual(chunks, [b\"asdf\", b\"qwer\"])\n        self.assertFalse(response.body)",
        "begin_line": 197,
        "end_line": 204,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_chunked_close#206",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_chunked_close(self)",
        "snippet": "    def test_chunked_close(self):\n        # test case in which chunks spread read-callback processing\n        # over several ioloop iterations, but the connection is already closed.\n        sock, port = bind_unused_port()\n        with closing(sock):\n\n            @gen.coroutine\n            def accept_callback(conn, address):\n                # fake an HTTP server using chunked encoding where the final chunks\n                # and connection close all happen at once\n                stream = IOStream(conn)\n                request_data = yield stream.read_until(b\"\\r\\n\\r\\n\")\n                if b\"HTTP/1.\" not in request_data:\n                    self.skipTest(\"requires HTTP/1.x\")\n                yield stream.write(\n                    b\"\"\"\\\nHTTP/1.1 200 OK\nTransfer-Encoding: chunked\n\n1\n1\n1\n2\n0\n\n\"\"\".replace(\n                        b\"\\n\", b\"\\r\\n\"\n                    )\n                )\n                stream.close()\n\n            netutil.add_accept_handler(sock, accept_callback)  # type: ignore\n            resp = self.fetch(\"http://127.0.0.1:%d/\" % port)\n            resp.rethrow()\n            self.assertEqual(resp.body, b\"12\")\n            self.io_loop.remove_handler(sock.fileno())",
        "begin_line": 206,
        "end_line": 241,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.accept_callback#213",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.accept_callback(conn, address)",
        "snippet": "            def accept_callback(conn, address):\n                # fake an HTTP server using chunked encoding where the final chunks\n                # and connection close all happen at once\n                stream = IOStream(conn)\n                request_data = yield stream.read_until(b\"\\r\\n\\r\\n\")\n                if b\"HTTP/1.\" not in request_data:\n                    self.skipTest(\"requires HTTP/1.x\")\n                yield stream.write(\n                    b\"\"\"\\\nHTTP/1.1 200 OK\nTransfer-Encoding: chunked\n\n1\n1\n1\n2\n0\n\n\"\"\".replace(\n                        b\"\\n\", b\"\\r\\n\"\n                    )\n                )\n                stream.close()",
        "begin_line": 213,
        "end_line": 235,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_basic_auth#243",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_basic_auth(self)",
        "snippet": "    def test_basic_auth(self):\n        # This test data appears in section 2 of RFC 7617.\n        self.assertEqual(\n            self.fetch(\n                \"/auth\", auth_username=\"Aladdin\", auth_password=\"open sesame\"\n            ).body,\n            b\"Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==\",\n        )",
        "begin_line": 243,
        "end_line": 250,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_basic_auth_explicit_mode#252",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_basic_auth_explicit_mode(self)",
        "snippet": "    def test_basic_auth_explicit_mode(self):\n        self.assertEqual(\n            self.fetch(\n                \"/auth\",\n                auth_username=\"Aladdin\",\n                auth_password=\"open sesame\",\n                auth_mode=\"basic\",\n            ).body,\n            b\"Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ==\",\n        )",
        "begin_line": 252,
        "end_line": 261,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_basic_auth_unicode#263",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_basic_auth_unicode(self)",
        "snippet": "    def test_basic_auth_unicode(self):\n        # This test data appears in section 2.1 of RFC 7617.\n        self.assertEqual(\n            self.fetch(\"/auth\", auth_username=\"test\", auth_password=\"123\u00a3\").body,\n            b\"Basic dGVzdDoxMjPCow==\",\n        )\n\n        # The standard mandates NFC. Give it a decomposed username\n        # and ensure it is normalized to composed form.\n        username = unicodedata.normalize(\"NFD\", u\"jos\u00e9\")\n        self.assertEqual(\n            self.fetch(\"/auth\", auth_username=username, auth_password=\"s\u0259cr\u0259t\").body,\n            b\"Basic am9zw6k6c8mZY3LJmXQ=\",\n        )",
        "begin_line": 263,
        "end_line": 276,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_unsupported_auth_mode#278",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_unsupported_auth_mode(self)",
        "snippet": "    def test_unsupported_auth_mode(self):\n        # curl and simple clients handle errors a bit differently; the\n        # important thing is that they don't fall back to basic auth\n        # on an unknown mode.\n        with ExpectLog(gen_log, \"uncaught exception\", required=False):\n            with self.assertRaises((ValueError, HTTPError)):\n                self.fetch(\n                    \"/auth\",\n                    auth_username=\"Aladdin\",\n                    auth_password=\"open sesame\",\n                    auth_mode=\"asdf\",\n                    raise_error=True,\n                )",
        "begin_line": 278,
        "end_line": 290,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_follow_redirect#292",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_follow_redirect(self)",
        "snippet": "    def test_follow_redirect(self):\n        response = self.fetch(\"/countdown/2\", follow_redirects=False)\n        self.assertEqual(302, response.code)\n        self.assertTrue(response.headers[\"Location\"].endswith(\"/countdown/1\"))\n\n        response = self.fetch(\"/countdown/2\")\n        self.assertEqual(200, response.code)\n        self.assertTrue(response.effective_url.endswith(\"/countdown/0\"))\n        self.assertEqual(b\"Zero\", response.body)",
        "begin_line": 292,
        "end_line": 300,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_redirect_without_location#302",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_redirect_without_location(self)",
        "snippet": "    def test_redirect_without_location(self):\n        response = self.fetch(\"/redirect_without_location\", follow_redirects=True)\n        # If there is no location header, the redirect response should\n        # just be returned as-is. (This should arguably raise an\n        # error, but libcurl doesn't treat this as an error, so we\n        # don't either).\n        self.assertEqual(301, response.code)",
        "begin_line": 302,
        "end_line": 308,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_redirect_put_with_body#310",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_redirect_put_with_body(self)",
        "snippet": "    def test_redirect_put_with_body(self):\n        response = self.fetch(\n            \"/redirect?url=/put&status=307\", method=\"PUT\", body=\"hello\"\n        )\n        self.assertEqual(response.body, b\"Put body: hello\")",
        "begin_line": 310,
        "end_line": 314,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_redirect_put_without_body#316",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_redirect_put_without_body(self)",
        "snippet": "    def test_redirect_put_without_body(self):\n        # This \"without body\" edge case is similar to what happens with body_producer.\n        response = self.fetch(\n            \"/redirect?url=/put&status=307\",\n            method=\"PUT\",\n            allow_nonstandard_methods=True,\n        )\n        self.assertEqual(response.body, b\"Put body: \")",
        "begin_line": 316,
        "end_line": 323,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_credentials_in_url#325",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_credentials_in_url(self)",
        "snippet": "    def test_credentials_in_url(self):\n        url = self.get_url(\"/auth\").replace(\"http://\", \"http://me:secret@\")\n        response = self.fetch(url)\n        self.assertEqual(b\"Basic \" + base64.b64encode(b\"me:secret\"), response.body)",
        "begin_line": 325,
        "end_line": 328,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_body_encoding#330",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_body_encoding(self)",
        "snippet": "    def test_body_encoding(self):\n        unicode_body = u\"\\xe9\"\n        byte_body = binascii.a2b_hex(b\"e9\")\n\n        # unicode string in body gets converted to utf8\n        response = self.fetch(\n            \"/echopost\",\n            method=\"POST\",\n            body=unicode_body,\n            headers={\"Content-Type\": \"application/blah\"},\n        )\n        self.assertEqual(response.headers[\"Content-Length\"], \"2\")\n        self.assertEqual(response.body, utf8(unicode_body))\n\n        # byte strings pass through directly\n        response = self.fetch(\n            \"/echopost\",\n            method=\"POST\",\n            body=byte_body,\n            headers={\"Content-Type\": \"application/blah\"},\n        )\n        self.assertEqual(response.headers[\"Content-Length\"], \"1\")\n        self.assertEqual(response.body, byte_body)\n\n        # Mixing unicode in headers and byte string bodies shouldn't\n        # break anything\n        response = self.fetch(\n            \"/echopost\",\n            method=\"POST\",\n            body=byte_body,\n            headers={\"Content-Type\": \"application/blah\"},\n            user_agent=u\"foo\",\n        )\n        self.assertEqual(response.headers[\"Content-Length\"], \"1\")\n        self.assertEqual(response.body, byte_body)",
        "begin_line": 330,
        "end_line": 364,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_types#366",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_types(self)",
        "snippet": "    def test_types(self):\n        response = self.fetch(\"/hello\")\n        self.assertEqual(type(response.body), bytes)\n        self.assertEqual(type(response.headers[\"Content-Type\"]), str)\n        self.assertEqual(type(response.code), int)\n        self.assertEqual(type(response.effective_url), str)",
        "begin_line": 366,
        "end_line": 371,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_header_callback#373",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_header_callback(self)",
        "snippet": "    def test_header_callback(self):\n        first_line = []\n        headers = {}\n        chunks = []\n\n        def header_callback(header_line):\n            if header_line.startswith(\"HTTP/1.1 101\"):\n                # Upgrading to HTTP/2\n                pass\n            elif header_line.startswith(\"HTTP/\"):\n                first_line.append(header_line)\n            elif header_line != \"\\r\\n\":\n                k, v = header_line.split(\":\", 1)\n                headers[k.lower()] = v.strip()\n\n        def streaming_callback(chunk):\n            # All header callbacks are run before any streaming callbacks,\n            # so the header data is available to process the data as it\n            # comes in.\n            self.assertEqual(headers[\"content-type\"], \"text/html; charset=UTF-8\")\n            chunks.append(chunk)\n\n        self.fetch(\n            \"/chunk\",\n            header_callback=header_callback,\n            streaming_callback=streaming_callback,\n        )\n        self.assertEqual(len(first_line), 1, first_line)\n        self.assertRegexpMatches(first_line[0], \"HTTP/[0-9]\\\\.[0-9] 200.*\\r\\n\")\n        self.assertEqual(chunks, [b\"asdf\", b\"qwer\"])",
        "begin_line": 373,
        "end_line": 402,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.header_callback#378",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.header_callback(header_line)",
        "snippet": "        def header_callback(header_line):\n            if header_line.startswith(\"HTTP/1.1 101\"):\n                # Upgrading to HTTP/2\n                pass\n            elif header_line.startswith(\"HTTP/\"):\n                first_line.append(header_line)\n            elif header_line != \"\\r\\n\":\n                k, v = header_line.split(\":\", 1)\n                headers[k.lower()] = v.strip()",
        "begin_line": 378,
        "end_line": 386,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.streaming_callback#388",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.streaming_callback(chunk)",
        "snippet": "        def streaming_callback(chunk):\n            # All header callbacks are run before any streaming callbacks,\n            # so the header data is available to process the data as it\n            # comes in.\n            self.assertEqual(headers[\"content-type\"], \"text/html; charset=UTF-8\")\n            chunks.append(chunk)",
        "begin_line": 388,
        "end_line": 393,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_configure_defaults#405",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_configure_defaults(self)",
        "snippet": "    def test_configure_defaults(self):\n        defaults = dict(user_agent=\"TestDefaultUserAgent\", allow_ipv6=False)\n        # Construct a new instance of the configured client class\n        client = self.http_client.__class__(force_instance=True, defaults=defaults)\n        try:\n            response = yield client.fetch(self.get_url(\"/user_agent\"))\n            self.assertEqual(response.body, b\"TestDefaultUserAgent\")\n        finally:\n            client.close()",
        "begin_line": 405,
        "end_line": 413,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_header_types#415",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_header_types(self)",
        "snippet": "    def test_header_types(self):\n        # Header values may be passed as character or utf8 byte strings,\n        # in a plain dictionary or an HTTPHeaders object.\n        # Keys must always be the native str type.\n        # All combinations should have the same results on the wire.\n        for value in [u\"MyUserAgent\", b\"MyUserAgent\"]:\n            for container in [dict, HTTPHeaders]:\n                headers = container()\n                headers[\"User-Agent\"] = value\n                resp = self.fetch(\"/user_agent\", headers=headers)\n                self.assertEqual(\n                    resp.body,\n                    b\"MyUserAgent\",\n                    \"response=%r, value=%r, container=%r\"\n                    % (resp.body, value, container),\n                )",
        "begin_line": 415,
        "end_line": 430,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_multi_line_headers#432",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_multi_line_headers(self)",
        "snippet": "    def test_multi_line_headers(self):\n        # Multi-line http headers are rare but rfc-allowed\n        # http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2\n        sock, port = bind_unused_port()\n        with closing(sock):\n\n            @gen.coroutine\n            def accept_callback(conn, address):\n                stream = IOStream(conn)\n                request_data = yield stream.read_until(b\"\\r\\n\\r\\n\")\n                if b\"HTTP/1.\" not in request_data:\n                    self.skipTest(\"requires HTTP/1.x\")\n                yield stream.write(\n                    b\"\"\"\\\nHTTP/1.1 200 OK\nX-XSS-Protection: 1;\n\\tmode=block\n\n\"\"\".replace(\n                        b\"\\n\", b\"\\r\\n\"\n                    )\n                )\n                stream.close()\n\n            netutil.add_accept_handler(sock, accept_callback)  # type: ignore\n            resp = self.fetch(\"http://127.0.0.1:%d/\" % port)\n            resp.rethrow()\n            self.assertEqual(resp.headers[\"X-XSS-Protection\"], \"1; mode=block\")\n            self.io_loop.remove_handler(sock.fileno())",
        "begin_line": 432,
        "end_line": 460,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.accept_callback#439",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.accept_callback(conn, address)",
        "snippet": "            def accept_callback(conn, address):\n                stream = IOStream(conn)\n                request_data = yield stream.read_until(b\"\\r\\n\\r\\n\")\n                if b\"HTTP/1.\" not in request_data:\n                    self.skipTest(\"requires HTTP/1.x\")\n                yield stream.write(\n                    b\"\"\"\\\nHTTP/1.1 200 OK\nX-XSS-Protection: 1;\n\\tmode=block\n\n\"\"\".replace(\n                        b\"\\n\", b\"\\r\\n\"\n                    )\n                )\n                stream.close()",
        "begin_line": 439,
        "end_line": 454,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_304_with_content_length#462",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_304_with_content_length(self)",
        "snippet": "    def test_304_with_content_length(self):\n        # According to the spec 304 responses SHOULD NOT include\n        # Content-Length or other entity headers, but some servers do it\n        # anyway.\n        # http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5\n        response = self.fetch(\"/304_with_content_length\")\n        self.assertEqual(response.code, 304)\n        self.assertEqual(response.headers[\"Content-Length\"], \"42\")",
        "begin_line": 462,
        "end_line": 469,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_future_interface#472",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_future_interface(self)",
        "snippet": "    def test_future_interface(self):\n        response = yield self.http_client.fetch(self.get_url(\"/hello\"))\n        self.assertEqual(response.body, b\"Hello world!\")",
        "begin_line": 472,
        "end_line": 474,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_future_http_error#477",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_future_http_error(self)",
        "snippet": "    def test_future_http_error(self):\n        with self.assertRaises(HTTPError) as context:\n            yield self.http_client.fetch(self.get_url(\"/notfound\"))\n        self.assertEqual(context.exception.code, 404)\n        self.assertEqual(context.exception.response.code, 404)",
        "begin_line": 477,
        "end_line": 481,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_future_http_error_no_raise#484",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_future_http_error_no_raise(self)",
        "snippet": "    def test_future_http_error_no_raise(self):\n        response = yield self.http_client.fetch(\n            self.get_url(\"/notfound\"), raise_error=False\n        )\n        self.assertEqual(response.code, 404)",
        "begin_line": 484,
        "end_line": 488,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_reuse_request_from_response#491",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_reuse_request_from_response(self)",
        "snippet": "    def test_reuse_request_from_response(self):\n        # The response.request attribute should be an HTTPRequest, not\n        # a _RequestProxy.\n        # This test uses self.http_client.fetch because self.fetch calls\n        # self.get_url on the input unconditionally.\n        url = self.get_url(\"/hello\")\n        response = yield self.http_client.fetch(url)\n        self.assertEqual(response.request.url, url)\n        self.assertTrue(isinstance(response.request, HTTPRequest))\n        response2 = yield self.http_client.fetch(response.request)\n        self.assertEqual(response2.body, b\"Hello world!\")",
        "begin_line": 491,
        "end_line": 501,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_bind_source_ip#504",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_bind_source_ip(self)",
        "snippet": "    def test_bind_source_ip(self):\n        url = self.get_url(\"/hello\")\n        request = HTTPRequest(url, network_interface=\"127.0.0.1\")\n        response = yield self.http_client.fetch(request)\n        self.assertEqual(response.code, 200)\n\n        with self.assertRaises((ValueError, HTTPError)) as context:\n            request = HTTPRequest(url, network_interface=\"not-interface-or-ip\")\n            yield self.http_client.fetch(request)\n        self.assertIn(\"not-interface-or-ip\", str(context.exception))",
        "begin_line": 504,
        "end_line": 513,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_all_methods#515",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_all_methods(self)",
        "snippet": "    def test_all_methods(self):\n        for method in [\"GET\", \"DELETE\", \"OPTIONS\"]:\n            response = self.fetch(\"/all_methods\", method=method)\n            self.assertEqual(response.body, utf8(method))\n        for method in [\"POST\", \"PUT\", \"PATCH\"]:\n            response = self.fetch(\"/all_methods\", method=method, body=b\"\")\n            self.assertEqual(response.body, utf8(method))\n        response = self.fetch(\"/all_methods\", method=\"HEAD\")\n        self.assertEqual(response.body, b\"\")\n        response = self.fetch(\n            \"/all_methods\", method=\"OTHER\", allow_nonstandard_methods=True\n        )\n        self.assertEqual(response.body, b\"OTHER\")",
        "begin_line": 515,
        "end_line": 527,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_body_sanity_checks#529",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_body_sanity_checks(self)",
        "snippet": "    def test_body_sanity_checks(self):\n        # These methods require a body.\n        for method in (\"POST\", \"PUT\", \"PATCH\"):\n            with self.assertRaises(ValueError) as context:\n                self.fetch(\"/all_methods\", method=method, raise_error=True)\n            self.assertIn(\"must not be None\", str(context.exception))\n\n            resp = self.fetch(\n                \"/all_methods\", method=method, allow_nonstandard_methods=True\n            )\n            self.assertEqual(resp.code, 200)\n\n        # These methods don't allow a body.\n        for method in (\"GET\", \"DELETE\", \"OPTIONS\"):\n            with self.assertRaises(ValueError) as context:\n                self.fetch(\n                    \"/all_methods\", method=method, body=b\"asdf\", raise_error=True\n                )\n            self.assertIn(\"must be None\", str(context.exception))\n\n            # In most cases this can be overridden, but curl_httpclient\n            # does not allow body with a GET at all.\n            if method != \"GET\":\n                self.fetch(\n                    \"/all_methods\",\n                    method=method,\n                    body=b\"asdf\",\n                    allow_nonstandard_methods=True,\n                    raise_error=True,\n                )\n                self.assertEqual(resp.code, 200)",
        "begin_line": 529,
        "end_line": 559,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_put_307#577",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_put_307(self)",
        "snippet": "    def test_put_307(self):\n        response = self.fetch(\n            \"/redirect?status=307&url=/put\", method=\"PUT\", body=b\"hello\"\n        )\n        response.rethrow()\n        self.assertEqual(response.body, b\"Put body: hello\")",
        "begin_line": 577,
        "end_line": 582,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_non_ascii_header#584",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_non_ascii_header(self)",
        "snippet": "    def test_non_ascii_header(self):\n        # Non-ascii headers are sent as latin1.\n        response = self.fetch(\"/set_header?k=foo&v=%E9\")\n        response.rethrow()\n        self.assertEqual(response.headers[\"Foo\"], native_str(u\"\\u00e9\"))",
        "begin_line": 584,
        "end_line": 588,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_response_times#590",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_response_times(self)",
        "snippet": "    def test_response_times(self):\n        # A few simple sanity checks of the response time fields to\n        # make sure they're using the right basis (between the\n        # wall-time and monotonic clocks).\n        start_time = time.time()\n        response = self.fetch(\"/hello\")\n        response.rethrow()\n        self.assertGreaterEqual(response.request_time, 0)\n        self.assertLess(response.request_time, 1.0)\n        # A very crude check to make sure that start_time is based on\n        # wall time and not the monotonic clock.\n        self.assertLess(abs(response.start_time - start_time), 1.0)\n\n        for k, v in response.time_info.items():\n            self.assertTrue(0 <= v < 1.0, \"time_info[%s] out of bounds: %s\" % (k, v))",
        "begin_line": 590,
        "end_line": 604,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_error_after_cancel#607",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPClientCommonTestCase",
        "signature": "tornado.test.httpclient_test.HTTPClientCommonTestCase.test_error_after_cancel(self)",
        "snippet": "    def test_error_after_cancel(self):\n        fut = self.http_client.fetch(self.get_url(\"/404\"))\n        self.assertTrue(fut.cancel())\n        with ExpectLog(app_log, \"Exception after Future was cancelled\") as el:\n            # We can't wait on the cancelled Future any more, so just\n            # let the IOLoop run until the exception gets logged (or\n            # not, in which case we exit the loop and ExpectLog will\n            # raise).\n            for i in range(100):\n                yield gen.sleep(0.01)\n                if el.logged_stack:\n                    break",
        "begin_line": 607,
        "end_line": 618,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.RequestProxyTest.test_request_set#622",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.RequestProxyTest",
        "signature": "tornado.test.httpclient_test.RequestProxyTest.test_request_set(self)",
        "snippet": "    def test_request_set(self):\n        proxy = _RequestProxy(\n            HTTPRequest(\"http://example.com/\", user_agent=\"foo\"), dict()\n        )\n        self.assertEqual(proxy.user_agent, \"foo\")",
        "begin_line": 622,
        "end_line": 626,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.RequestProxyTest.test_default_set#628",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.RequestProxyTest",
        "signature": "tornado.test.httpclient_test.RequestProxyTest.test_default_set(self)",
        "snippet": "    def test_default_set(self):\n        proxy = _RequestProxy(\n            HTTPRequest(\"http://example.com/\"), dict(network_interface=\"foo\")\n        )\n        self.assertEqual(proxy.network_interface, \"foo\")",
        "begin_line": 628,
        "end_line": 632,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.RequestProxyTest.test_both_set#634",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.RequestProxyTest",
        "signature": "tornado.test.httpclient_test.RequestProxyTest.test_both_set(self)",
        "snippet": "    def test_both_set(self):\n        proxy = _RequestProxy(\n            HTTPRequest(\"http://example.com/\", proxy_host=\"foo\"), dict(proxy_host=\"bar\")\n        )\n        self.assertEqual(proxy.proxy_host, \"foo\")",
        "begin_line": 634,
        "end_line": 638,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.RequestProxyTest.test_neither_set#640",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.RequestProxyTest",
        "signature": "tornado.test.httpclient_test.RequestProxyTest.test_neither_set(self)",
        "snippet": "    def test_neither_set(self):\n        proxy = _RequestProxy(HTTPRequest(\"http://example.com/\"), dict())\n        self.assertIs(proxy.auth_username, None)",
        "begin_line": 640,
        "end_line": 642,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.RequestProxyTest.test_bad_attribute#644",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.RequestProxyTest",
        "signature": "tornado.test.httpclient_test.RequestProxyTest.test_bad_attribute(self)",
        "snippet": "    def test_bad_attribute(self):\n        proxy = _RequestProxy(HTTPRequest(\"http://example.com/\"), dict())\n        with self.assertRaises(AttributeError):\n            proxy.foo",
        "begin_line": 644,
        "end_line": 647,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.RequestProxyTest.test_defaults_none#649",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.RequestProxyTest",
        "signature": "tornado.test.httpclient_test.RequestProxyTest.test_defaults_none(self)",
        "snippet": "    def test_defaults_none(self):\n        proxy = _RequestProxy(HTTPRequest(\"http://example.com/\"), None)\n        self.assertIs(proxy.auth_username, None)",
        "begin_line": 649,
        "end_line": 651,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPResponseTestCase.test_str#655",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPResponseTestCase",
        "signature": "tornado.test.httpclient_test.HTTPResponseTestCase.test_str(self)",
        "snippet": "    def test_str(self):\n        response = HTTPResponse(  # type: ignore\n            HTTPRequest(\"http://example.com\"), 200, headers={}, buffer=BytesIO()\n        )\n        s = str(response)\n        self.assertTrue(s.startswith(\"HTTPResponse(\"))\n        self.assertIn(\"code=200\", s)",
        "begin_line": 655,
        "end_line": 661,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientTest.setUp#665",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientTest.setUp(self)",
        "snippet": "    def setUp(self):\n        self.server_ioloop = IOLoop()\n        event = threading.Event()\n\n        @gen.coroutine\n        def init_server():\n            sock, self.port = bind_unused_port()\n            app = Application([(\"/\", HelloWorldHandler)])\n            self.server = HTTPServer(app)\n            self.server.add_socket(sock)\n            event.set()\n\n        def start():\n            self.server_ioloop.run_sync(init_server)\n            self.server_ioloop.start()\n\n        self.server_thread = threading.Thread(target=start)\n        self.server_thread.start()\n        event.wait()\n\n        self.http_client = HTTPClient()",
        "begin_line": 665,
        "end_line": 685,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientTest.init_server#670",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientTest.init_server()",
        "snippet": "        def init_server():\n            sock, self.port = bind_unused_port()\n            app = Application([(\"/\", HelloWorldHandler)])\n            self.server = HTTPServer(app)\n            self.server.add_socket(sock)\n            event.set()",
        "begin_line": 670,
        "end_line": 675,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientTest.start#677",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientTest.start()",
        "snippet": "        def start():\n            self.server_ioloop.run_sync(init_server)\n            self.server_ioloop.start()",
        "begin_line": 677,
        "end_line": 679,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientTest.tearDown#687",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientTest.tearDown(self)",
        "snippet": "    def tearDown(self):\n        def stop_server():\n            self.server.stop()\n            # Delay the shutdown of the IOLoop by several iterations because\n            # the server may still have some cleanup work left when\n            # the client finishes with the response (this is noticeable\n            # with http/2, which leaves a Future with an unexamined\n            # StreamClosedError on the loop).\n\n            @gen.coroutine\n            def slow_stop():\n                yield self.server.close_all_connections()\n                # The number of iterations is difficult to predict. Typically,\n                # one is sufficient, although sometimes it needs more.\n                for i in range(5):\n                    yield\n                self.server_ioloop.stop()\n\n            self.server_ioloop.add_callback(slow_stop)\n\n        self.server_ioloop.add_callback(stop_server)\n        self.server_thread.join()\n        self.http_client.close()\n        self.server_ioloop.close(all_fds=True)",
        "begin_line": 687,
        "end_line": 710,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientTest.stop_server#688",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientTest.stop_server()",
        "snippet": "        def stop_server():\n            self.server.stop()\n            # Delay the shutdown of the IOLoop by several iterations because\n            # the server may still have some cleanup work left when\n            # the client finishes with the response (this is noticeable\n            # with http/2, which leaves a Future with an unexamined\n            # StreamClosedError on the loop).\n\n            @gen.coroutine\n            def slow_stop():\n                yield self.server.close_all_connections()\n                # The number of iterations is difficult to predict. Typically,\n                # one is sufficient, although sometimes it needs more.\n                for i in range(5):\n                    yield\n                self.server_ioloop.stop()\n\n            self.server_ioloop.add_callback(slow_stop)",
        "begin_line": 688,
        "end_line": 705,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientTest.slow_stop#697",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientTest.slow_stop()",
        "snippet": "            def slow_stop():\n                yield self.server.close_all_connections()\n                # The number of iterations is difficult to predict. Typically,\n                # one is sufficient, although sometimes it needs more.\n                for i in range(5):\n                    yield\n                self.server_ioloop.stop()",
        "begin_line": 697,
        "end_line": 703,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientTest.get_url#712",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientTest.get_url(self, path)",
        "snippet": "    def get_url(self, path):\n        return \"http://127.0.0.1:%d%s\" % (self.port, path)",
        "begin_line": 712,
        "end_line": 713,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientTest.test_sync_client#715",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientTest.test_sync_client(self)",
        "snippet": "    def test_sync_client(self):\n        response = self.http_client.fetch(self.get_url(\"/\"))\n        self.assertEqual(b\"Hello world!\", response.body)",
        "begin_line": 715,
        "end_line": 717,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientTest.test_sync_client_error#719",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientTest.test_sync_client_error(self)",
        "snippet": "    def test_sync_client_error(self):\n        # Synchronous HTTPClient raises errors directly; no need for\n        # response.rethrow()\n        with self.assertRaises(HTTPError) as assertion:\n            self.http_client.fetch(self.get_url(\"/notfound\"))\n        self.assertEqual(assertion.exception.code, 404)",
        "begin_line": 719,
        "end_line": 724,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.SyncHTTPClientSubprocessTest.test_destructor_log#728",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.SyncHTTPClientSubprocessTest",
        "signature": "tornado.test.httpclient_test.SyncHTTPClientSubprocessTest.test_destructor_log(self)",
        "snippet": "    def test_destructor_log(self):\n        # Regression test for\n        # https://github.com/tornadoweb/tornado/issues/2539\n        #\n        # In the past, the following program would log an\n        # \"inconsistent AsyncHTTPClient cache\" error from a destructor\n        # when the process is shutting down. The shutdown process is\n        # subtle and I don't fully understand it; the failure does not\n        # manifest if that lambda isn't there or is a simpler object\n        # like an int (nor does it manifest in the tornado test suite\n        # as a whole, which is why we use this subprocess).\n        proc = subprocess.run(\n            [\n                sys.executable,\n                \"-c\",\n                \"from tornado.httpclient import HTTPClient; f = lambda: None; c = HTTPClient()\",\n            ],\n            stdout=subprocess.PIPE,\n            stderr=subprocess.STDOUT,\n            check=True,\n        )\n        if proc.stdout:\n            print(\"STDOUT:\")\n            print(to_unicode(proc.stdout))\n        if proc.stdout:\n            self.fail(\"subprocess produced unexpected output\")",
        "begin_line": 728,
        "end_line": 753,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPRequestTestCase.test_headers#757",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPRequestTestCase",
        "signature": "tornado.test.httpclient_test.HTTPRequestTestCase.test_headers(self)",
        "snippet": "    def test_headers(self):\n        request = HTTPRequest(\"http://example.com\", headers={\"foo\": \"bar\"})\n        self.assertEqual(request.headers, {\"foo\": \"bar\"})",
        "begin_line": 757,
        "end_line": 759,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPRequestTestCase.test_headers_setter#761",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPRequestTestCase",
        "signature": "tornado.test.httpclient_test.HTTPRequestTestCase.test_headers_setter(self)",
        "snippet": "    def test_headers_setter(self):\n        request = HTTPRequest(\"http://example.com\")\n        request.headers = {\"bar\": \"baz\"}  # type: ignore\n        self.assertEqual(request.headers, {\"bar\": \"baz\"})",
        "begin_line": 761,
        "end_line": 764,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPRequestTestCase.test_null_headers_setter#766",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPRequestTestCase",
        "signature": "tornado.test.httpclient_test.HTTPRequestTestCase.test_null_headers_setter(self)",
        "snippet": "    def test_null_headers_setter(self):\n        request = HTTPRequest(\"http://example.com\")\n        request.headers = None  # type: ignore\n        self.assertEqual(request.headers, {})",
        "begin_line": 766,
        "end_line": 769,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPRequestTestCase.test_body#771",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPRequestTestCase",
        "signature": "tornado.test.httpclient_test.HTTPRequestTestCase.test_body(self)",
        "snippet": "    def test_body(self):\n        request = HTTPRequest(\"http://example.com\", body=\"foo\")\n        self.assertEqual(request.body, utf8(\"foo\"))",
        "begin_line": 771,
        "end_line": 773,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPRequestTestCase.test_body_setter#775",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPRequestTestCase",
        "signature": "tornado.test.httpclient_test.HTTPRequestTestCase.test_body_setter(self)",
        "snippet": "    def test_body_setter(self):\n        request = HTTPRequest(\"http://example.com\")\n        request.body = \"foo\"  # type: ignore\n        self.assertEqual(request.body, utf8(\"foo\"))",
        "begin_line": 775,
        "end_line": 778,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPRequestTestCase.test_if_modified_since#780",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPRequestTestCase",
        "signature": "tornado.test.httpclient_test.HTTPRequestTestCase.test_if_modified_since(self)",
        "snippet": "    def test_if_modified_since(self):\n        http_date = datetime.datetime.utcnow()\n        request = HTTPRequest(\"http://example.com\", if_modified_since=http_date)\n        self.assertEqual(\n            request.headers, {\"If-Modified-Since\": format_timestamp(http_date)}\n        )",
        "begin_line": 780,
        "end_line": 785,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPErrorTestCase.test_copy#789",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPErrorTestCase",
        "signature": "tornado.test.httpclient_test.HTTPErrorTestCase.test_copy(self)",
        "snippet": "    def test_copy(self):\n        e = HTTPError(403)\n        e2 = copy.copy(e)\n        self.assertIsNot(e, e2)\n        self.assertEqual(e.code, e2.code)",
        "begin_line": 789,
        "end_line": 793,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPErrorTestCase.test_plain_error#795",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPErrorTestCase",
        "signature": "tornado.test.httpclient_test.HTTPErrorTestCase.test_plain_error(self)",
        "snippet": "    def test_plain_error(self):\n        e = HTTPError(403)\n        self.assertEqual(str(e), \"HTTP 403: Forbidden\")\n        self.assertEqual(repr(e), \"HTTP 403: Forbidden\")",
        "begin_line": 795,
        "end_line": 798,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tornado.test.httpclient_test.HTTPErrorTestCase.test_error_with_response#800",
        "src_path": "tornado/test/httpclient_test.py",
        "class_name": "tornado.test.httpclient_test.HTTPErrorTestCase",
        "signature": "tornado.test.httpclient_test.HTTPErrorTestCase.test_error_with_response(self)",
        "snippet": "    def test_error_with_response(self):\n        resp = HTTPResponse(HTTPRequest(\"http://example.com/\"), 403)\n        with self.assertRaises(HTTPError) as cm:\n            resp.rethrow()\n        e = cm.exception\n        self.assertEqual(str(e), \"HTTP 403: Forbidden\")\n        self.assertEqual(repr(e), \"HTTP 403: Forbidden\")",
        "begin_line": 800,
        "end_line": 806,
        "comment": "",
        "is_bug": false
    }
]