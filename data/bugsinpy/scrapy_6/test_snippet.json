[
    {
        "name": "tests.test_pipeline_images._mocked_download_func#27",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images",
        "signature": "tests.test_pipeline_images._mocked_download_func(request, info)",
        "snippet": "def _mocked_download_func(request, info):\n    response = request.meta.get('response')\n    return response() if callable(response) else response",
        "begin_line": 27,
        "end_line": 29,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCase.setUp#36",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCase.setUp(self)",
        "snippet": "    def setUp(self):\n        self.tempdir = mkdtemp()\n        self.pipeline = ImagesPipeline(self.tempdir, download_func=_mocked_download_func)",
        "begin_line": 36,
        "end_line": 38,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCase.tearDown#40",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCase.tearDown(self)",
        "snippet": "    def tearDown(self):\n        rmtree(self.tempdir)",
        "begin_line": 40,
        "end_line": 41,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCase.test_file_path#43",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCase.test_file_path(self)",
        "snippet": "    def test_file_path(self):\n        file_path = self.pipeline.file_path\n        self.assertEqual(file_path(Request(\"https://dev.mydeco.com/mydeco.gif\")),\n                         'full/3fd165099d8e71b8a48b2683946e64dbfad8b52d.jpg')\n        self.assertEqual(file_path(Request(\"http://www.maddiebrown.co.uk///catalogue-items//image_54642_12175_95307.jpg\")),\n                         'full/0ffcd85d563bca45e2f90becd0ca737bc58a00b2.jpg')\n        self.assertEqual(file_path(Request(\"https://dev.mydeco.com/two/dirs/with%20spaces%2Bsigns.gif\")),\n                         'full/b250e3a74fff2e4703e310048a5b13eba79379d2.jpg')\n        self.assertEqual(file_path(Request(\"http://www.dfsonline.co.uk/get_prod_image.php?img=status_0907_mdm.jpg\")),\n                         'full/4507be485f38b0da8a0be9eb2e1dfab8a19223f2.jpg')\n        self.assertEqual(file_path(Request(\"http://www.dorma.co.uk/images/product_details/2532/\")),\n                         'full/97ee6f8a46cbbb418ea91502fd24176865cf39b2.jpg')\n        self.assertEqual(file_path(Request(\"http://www.dorma.co.uk/images/product_details/2532\")),\n                         'full/244e0dd7d96a3b7b01f54eded250c9e272577aa1.jpg')\n        self.assertEqual(file_path(Request(\"http://www.dorma.co.uk/images/product_details/2532\"),\n                                   response=Response(\"http://www.dorma.co.uk/images/product_details/2532\"),\n                                   info=object()),\n                         'full/244e0dd7d96a3b7b01f54eded250c9e272577aa1.jpg')",
        "begin_line": 43,
        "end_line": 60,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCase.test_thumbnail_name#62",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCase.test_thumbnail_name(self)",
        "snippet": "    def test_thumbnail_name(self):\n        thumb_path = self.pipeline.thumb_path\n        name = '50'\n        self.assertEqual(thumb_path(Request(\"file:///tmp/foo.jpg\"), name),\n                         'thumbs/50/38a86208c36e59d4404db9e37ce04be863ef0335.jpg')\n        self.assertEqual(thumb_path(Request(\"file://foo.png\"), name),\n                         'thumbs/50/e55b765eba0ec7348e50a1df496040449071b96a.jpg')\n        self.assertEqual(thumb_path(Request(\"file:///tmp/foo\"), name),\n                         'thumbs/50/0329ad83ebb8e93ea7c7906d46e9ed55f7349a50.jpg')\n        self.assertEqual(thumb_path(Request(\"file:///tmp/some.name/foo\"), name),\n                         'thumbs/50/850233df65a5b83361798f532f1fc549cd13cbe9.jpg')\n        self.assertEqual(thumb_path(Request(\"file:///tmp/some.name/foo\"), name,\n                                    response=Response(\"file:///tmp/some.name/foo\"),\n                                    info=object()),\n                         'thumbs/50/850233df65a5b83361798f532f1fc549cd13cbe9.jpg')",
        "begin_line": 62,
        "end_line": 76,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCase.test_convert_image#78",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCase.test_convert_image(self)",
        "snippet": "    def test_convert_image(self):\n        SIZE = (100, 100)\n        # straigh forward case: RGB and JPEG\n        COLOUR = (0, 127, 255)\n        im = _create_image('JPEG', 'RGB', SIZE, COLOUR)\n        converted, _ = self.pipeline.convert_image(im)\n        self.assertEquals(converted.mode, 'RGB')\n        self.assertEquals(converted.getcolors(), [(10000, COLOUR)])\n\n        # check that thumbnail keep image ratio\n        thumbnail, _ = self.pipeline.convert_image(converted, size=(10, 25))\n        self.assertEquals(thumbnail.mode, 'RGB')\n        self.assertEquals(thumbnail.size, (10, 10))\n\n        # transparency case: RGBA and PNG\n        COLOUR = (0, 127, 255, 50)\n        im = _create_image('PNG', 'RGBA', SIZE, COLOUR)\n        converted, _ = self.pipeline.convert_image(im)\n        self.assertEquals(converted.mode, 'RGB')\n        self.assertEquals(converted.getcolors(), [(10000, (205, 230, 255))])\n\n        # transparency case with palette: P and PNG\n        COLOUR = (0, 127, 255, 50)\n        im = _create_image('PNG', 'RGBA', SIZE, COLOUR)\n        im = im.convert('P')\n        converted, _ = self.pipeline.convert_image(im)\n        self.assertEquals(converted.mode, 'RGB')\n        self.assertEquals(converted.getcolors(), [(10000, (205, 230, 255))])",
        "begin_line": 78,
        "end_line": 105,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipeline.file_key#109",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipeline",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipeline.file_key(self, url)",
        "snippet": "    def file_key(self, url):\n        return self.image_key(url)",
        "begin_line": 109,
        "end_line": 110,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipeline.image_key#112",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipeline",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipeline.image_key(self, url)",
        "snippet": "    def image_key(self, url):\n        image_guid = hashlib.sha1(to_bytes(url)).hexdigest()\n        return 'empty/%s.jpg' % (image_guid)",
        "begin_line": 112,
        "end_line": 114,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipeline.thumb_key#116",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipeline",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipeline.thumb_key(self, url, thumb_id)",
        "snippet": "    def thumb_key(self, url, thumb_id):\n        thumb_guid = hashlib.sha1(to_bytes(url)).hexdigest()\n        return 'thumbsup/%s/%s.jpg' % (thumb_id, thumb_guid)",
        "begin_line": 116,
        "end_line": 118,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.setUp#122",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.setUp(self)",
        "snippet": "    def setUp(self):\n        self.tempdir = mkdtemp()",
        "begin_line": 122,
        "end_line": 123,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.init_pipeline#125",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.init_pipeline(self, pipeline_class)",
        "snippet": "    def init_pipeline(self, pipeline_class):\n        self.pipeline = pipeline_class(self.tempdir, download_func=_mocked_download_func)\n        self.pipeline.open_spider(None)",
        "begin_line": 125,
        "end_line": 127,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_default_file_key_method#129",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_default_file_key_method(self)",
        "snippet": "    def test_default_file_key_method(self):\n        self.init_pipeline(ImagesPipeline)\n        with warnings.catch_warnings(record=True) as w:\n            warnings.simplefilter('always')\n            self.assertEqual(self.pipeline.file_key(\"https://dev.mydeco.com/mydeco.gif\"),\n                             'full/3fd165099d8e71b8a48b2683946e64dbfad8b52d.jpg')\n            self.assertEqual(len(w), 1)\n            self.assertTrue('image_key(url) and file_key(url) methods are deprecated' in str(w[-1].message))",
        "begin_line": 129,
        "end_line": 136,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_default_image_key_method#138",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_default_image_key_method(self)",
        "snippet": "    def test_default_image_key_method(self):\n        self.init_pipeline(ImagesPipeline)\n        with warnings.catch_warnings(record=True) as w:\n            warnings.simplefilter('always')\n            self.assertEqual(self.pipeline.image_key(\"https://dev.mydeco.com/mydeco.gif\"),\n                             'full/3fd165099d8e71b8a48b2683946e64dbfad8b52d.jpg')\n            self.assertEqual(len(w), 1)\n            self.assertTrue('image_key(url) and file_key(url) methods are deprecated' in str(w[-1].message))",
        "begin_line": 138,
        "end_line": 145,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_overridden_file_key_method#147",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_overridden_file_key_method(self)",
        "snippet": "    def test_overridden_file_key_method(self):\n        self.init_pipeline(DeprecatedImagesPipeline)\n        with warnings.catch_warnings(record=True) as w:\n            warnings.simplefilter('always')\n            self.assertEqual(self.pipeline.file_path(Request(\"https://dev.mydeco.com/mydeco.gif\")),\n                             'empty/3fd165099d8e71b8a48b2683946e64dbfad8b52d.jpg')\n            self.assertEqual(len(w), 1)\n            self.assertTrue('image_key(url) and file_key(url) methods are deprecated' in str(w[-1].message))",
        "begin_line": 147,
        "end_line": 154,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_default_thumb_key_method#156",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_default_thumb_key_method(self)",
        "snippet": "    def test_default_thumb_key_method(self):\n        self.init_pipeline(ImagesPipeline)\n        with warnings.catch_warnings(record=True) as w:\n            warnings.simplefilter('always')\n            self.assertEqual(self.pipeline.thumb_key(\"file:///tmp/foo.jpg\", 50),\n                             'thumbs/50/38a86208c36e59d4404db9e37ce04be863ef0335.jpg')\n            self.assertEqual(len(w), 1)\n            self.assertTrue('thumb_key(url) method is deprecated' in str(w[-1].message))",
        "begin_line": 156,
        "end_line": 163,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_overridden_thumb_key_method#165",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.test_overridden_thumb_key_method(self)",
        "snippet": "    def test_overridden_thumb_key_method(self):\n        self.init_pipeline(DeprecatedImagesPipeline)\n        with warnings.catch_warnings(record=True) as w:\n            warnings.simplefilter('always')\n            self.assertEqual(self.pipeline.thumb_path(Request(\"file:///tmp/foo.jpg\"), 50),\n                             'thumbsup/50/38a86208c36e59d4404db9e37ce04be863ef0335.jpg')\n            self.assertEqual(len(w), 1)\n            self.assertTrue('thumb_key(url) method is deprecated' in str(w[-1].message))",
        "begin_line": 165,
        "end_line": 172,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.tearDown#174",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase",
        "signature": "tests.test_pipeline_images.DeprecatedImagesPipelineTestCase.tearDown(self)",
        "snippet": "    def tearDown(self):\n        rmtree(self.tempdir)",
        "begin_line": 174,
        "end_line": 175,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseFields.test_item_fields_default#180",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseFields",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseFields.test_item_fields_default(self)",
        "snippet": "    def test_item_fields_default(self):\n        class TestItem(Item):\n            name = Field()\n            image_urls = Field()\n            images = Field()\n\n        for cls in TestItem, dict:\n            url = 'http://www.example.com/images/1.jpg'\n            item = cls({'name': 'item1', 'image_urls': [url]})\n            pipeline = ImagesPipeline.from_settings(Settings({'IMAGES_STORE': 's3://example/images/'}))\n            requests = list(pipeline.get_media_requests(item, None))\n            self.assertEqual(requests[0].url, url)\n            results = [(True, {'url': url})]\n            pipeline.item_completed(results, item, None)\n            self.assertEqual(item['images'], [results[0][1]])",
        "begin_line": 180,
        "end_line": 194,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.TestItem.test_item_fields_default#180",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.TestItem",
        "signature": "tests.test_pipeline_images.TestItem.test_item_fields_default(self)",
        "snippet": "    def test_item_fields_default(self):\n        class TestItem(Item):\n            name = Field()\n            image_urls = Field()\n            images = Field()\n\n        for cls in TestItem, dict:\n            url = 'http://www.example.com/images/1.jpg'\n            item = cls({'name': 'item1', 'image_urls': [url]})\n            pipeline = ImagesPipeline.from_settings(Settings({'IMAGES_STORE': 's3://example/images/'}))\n            requests = list(pipeline.get_media_requests(item, None))\n            self.assertEqual(requests[0].url, url)\n            results = [(True, {'url': url})]\n            pipeline.item_completed(results, item, None)\n            self.assertEqual(item['images'], [results[0][1]])",
        "begin_line": 180,
        "end_line": 194,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseFields.test_item_fields_override_settings#196",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseFields",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseFields.test_item_fields_override_settings(self)",
        "snippet": "    def test_item_fields_override_settings(self):\n        class TestItem(Item):\n            name = Field()\n            image = Field()\n            stored_image = Field()\n\n        for cls in TestItem, dict:\n            url = 'http://www.example.com/images/1.jpg'\n            item = cls({'name': 'item1', 'image': [url]})\n            pipeline = ImagesPipeline.from_settings(Settings({\n                'IMAGES_STORE': 's3://example/images/',\n                'IMAGES_URLS_FIELD': 'image',\n                'IMAGES_RESULT_FIELD': 'stored_image'\n            }))\n            requests = list(pipeline.get_media_requests(item, None))\n            self.assertEqual(requests[0].url, url)\n            results = [(True, {'url': url})]\n            pipeline.item_completed(results, item, None)\n            self.assertEqual(item['stored_image'], [results[0][1]])",
        "begin_line": 196,
        "end_line": 214,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.TestItem.test_item_fields_override_settings#196",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.TestItem",
        "signature": "tests.test_pipeline_images.TestItem.test_item_fields_override_settings(self)",
        "snippet": "    def test_item_fields_override_settings(self):\n        class TestItem(Item):\n            name = Field()\n            image = Field()\n            stored_image = Field()\n\n        for cls in TestItem, dict:\n            url = 'http://www.example.com/images/1.jpg'\n            item = cls({'name': 'item1', 'image': [url]})\n            pipeline = ImagesPipeline.from_settings(Settings({\n                'IMAGES_STORE': 's3://example/images/',\n                'IMAGES_URLS_FIELD': 'image',\n                'IMAGES_RESULT_FIELD': 'stored_image'\n            }))\n            requests = list(pipeline.get_media_requests(item, None))\n            self.assertEqual(requests[0].url, url)\n            results = [(True, {'url': url})]\n            pipeline.item_completed(results, item, None)\n            self.assertEqual(item['stored_image'], [results[0][1]])",
        "begin_line": 196,
        "end_line": 214,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.setUp#239",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.setUp(self)",
        "snippet": "    def setUp(self):\n        self.tempdir = mkdtemp()",
        "begin_line": 239,
        "end_line": 240,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.tearDown#242",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.tearDown(self)",
        "snippet": "    def tearDown(self):\n        rmtree(self.tempdir)",
        "begin_line": 242,
        "end_line": 243,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings._generate_fake_settings#245",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings._generate_fake_settings(self, prefix=None)",
        "snippet": "    def _generate_fake_settings(self, prefix=None):\n        \"\"\"\n        :param prefix: string for setting keys\n        :return: dictionary of image pipeline settings\n        \"\"\"\n\n        def random_string():\n            return \"\".join([chr(random.randint(97, 123)) for _ in range(10)])\n\n        settings = {\n            \"IMAGES_EXPIRES\": random.randint(100, 1000),\n            \"IMAGES_STORE\": self.tempdir,\n            \"IMAGES_RESULT_FIELD\": random_string(),\n            \"IMAGES_URLS_FIELD\": random_string(),\n            \"IMAGES_MIN_WIDTH\": random.randint(1, 1000),\n            \"IMAGES_MIN_HEIGHT\": random.randint(1, 1000),\n            \"IMAGES_THUMBS\": {\n                'small': (random.randint(1, 1000), random.randint(1, 1000)),\n                'big': (random.randint(1, 1000), random.randint(1, 1000))\n            }\n        }\n        if not prefix:\n            return settings\n\n        return {prefix.upper() + \"_\" + k if k != \"IMAGES_STORE\" else k: v for k, v in settings.items()}",
        "begin_line": 245,
        "end_line": 269,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.random_string#251",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.random_string()",
        "snippet": "        def random_string():\n            return \"\".join([chr(random.randint(97, 123)) for _ in range(10)])",
        "begin_line": 251,
        "end_line": 252,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings._generate_fake_pipeline_subclass#271",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings._generate_fake_pipeline_subclass(self)",
        "snippet": "    def _generate_fake_pipeline_subclass(self):\n        \"\"\"\n        :return: ImagePipeline class will all uppercase attributes set.\n        \"\"\"\n        class UserDefinedImagePipeline(ImagesPipeline):\n            # Values should be in different range than fake_settings.\n            MIN_WIDTH = random.randint(1000, 2000)\n            MIN_HEIGHT = random.randint(1000, 2000)\n            THUMBS = {\n                'small': (random.randint(1000, 2000), random.randint(1000, 2000)),\n                'big': (random.randint(1000, 2000), random.randint(1000, 2000))\n            }\n            EXPIRES = random.randint(1000, 2000)\n            IMAGES_URLS_FIELD = \"field_one\"\n            IMAGES_RESULT_FIELD = \"field_two\"\n\n        return UserDefinedImagePipeline",
        "begin_line": 271,
        "end_line": 287,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.UserDefinedImagePipeline._generate_fake_pipeline_subclass#271",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.UserDefinedImagePipeline",
        "signature": "tests.test_pipeline_images.UserDefinedImagePipeline._generate_fake_pipeline_subclass(self)",
        "snippet": "    def _generate_fake_pipeline_subclass(self):\n        \"\"\"\n        :return: ImagePipeline class will all uppercase attributes set.\n        \"\"\"\n        class UserDefinedImagePipeline(ImagesPipeline):\n            # Values should be in different range than fake_settings.\n            MIN_WIDTH = random.randint(1000, 2000)\n            MIN_HEIGHT = random.randint(1000, 2000)\n            THUMBS = {\n                'small': (random.randint(1000, 2000), random.randint(1000, 2000)),\n                'big': (random.randint(1000, 2000), random.randint(1000, 2000))\n            }\n            EXPIRES = random.randint(1000, 2000)\n            IMAGES_URLS_FIELD = \"field_one\"\n            IMAGES_RESULT_FIELD = \"field_two\"\n\n        return UserDefinedImagePipeline",
        "begin_line": 271,
        "end_line": 287,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_different_settings_for_different_instances#289",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_different_settings_for_different_instances(self)",
        "snippet": "    def test_different_settings_for_different_instances(self):\n        \"\"\"\n        If there are two instances of ImagesPipeline class with different settings, they should\n        have different settings.\n        \"\"\"\n        custom_settings = self._generate_fake_settings()\n        default_settings = Settings()\n        default_sts_pipe = ImagesPipeline(self.tempdir, settings=default_settings)\n        user_sts_pipe = ImagesPipeline.from_settings(Settings(custom_settings))\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            expected_default_value = self.default_pipeline_settings.get(pipe_attr)\n            custom_value = custom_settings.get(settings_attr)\n            self.assertNotEqual(expected_default_value, custom_value)\n            self.assertEqual(getattr(default_sts_pipe, pipe_attr.lower()), expected_default_value)\n            self.assertEqual(getattr(user_sts_pipe, pipe_attr.lower()), custom_value)",
        "begin_line": 289,
        "end_line": 303,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_subclass_attrs_preserved_default_settings#305",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_subclass_attrs_preserved_default_settings(self)",
        "snippet": "    def test_subclass_attrs_preserved_default_settings(self):\n        \"\"\"\n        If image settings are not defined at all subclass of ImagePipeline takes values\n        from class attributes.\n        \"\"\"\n        pipeline_cls = self._generate_fake_pipeline_subclass()\n        pipeline = pipeline_cls.from_settings(Settings({\"IMAGES_STORE\": self.tempdir}))\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            # Instance attribute (lowercase) must be equal to class attribute (uppercase).\n            attr_value = getattr(pipeline, pipe_attr.lower())\n            self.assertNotEqual(attr_value, self.default_pipeline_settings[pipe_attr])\n            self.assertEqual(attr_value, getattr(pipeline, pipe_attr))",
        "begin_line": 305,
        "end_line": 316,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_subclass_attrs_preserved_custom_settings#318",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_subclass_attrs_preserved_custom_settings(self)",
        "snippet": "    def test_subclass_attrs_preserved_custom_settings(self):\n        \"\"\"\n        If image settings are defined but they are not defined for subclass default\n        values taken from settings should be preserved.\n        \"\"\"\n        pipeline_cls = self._generate_fake_pipeline_subclass()\n        settings = self._generate_fake_settings()\n        pipeline = pipeline_cls.from_settings(Settings(settings))\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            # Instance attribute (lowercase) must be equal to\n            # value defined in settings.\n            value = getattr(pipeline, pipe_attr.lower())\n            self.assertNotEqual(value, self.default_pipeline_settings[pipe_attr])\n            setings_value = settings.get(settings_attr)\n            self.assertEqual(value, setings_value)",
        "begin_line": 318,
        "end_line": 332,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_no_custom_settings_for_subclasses#334",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_no_custom_settings_for_subclasses(self)",
        "snippet": "    def test_no_custom_settings_for_subclasses(self):\n        \"\"\"\n        If there are no settings for subclass and no subclass attributes, pipeline should use\n        attributes of base class.\n        \"\"\"\n        class UserDefinedImagePipeline(ImagesPipeline):\n            pass\n\n        user_pipeline = UserDefinedImagePipeline.from_settings(Settings({\"IMAGES_STORE\": self.tempdir}))\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            # Values from settings for custom pipeline should be set on pipeline instance.\n            custom_value = self.default_pipeline_settings.get(pipe_attr.upper())\n            self.assertEqual(getattr(user_pipeline, pipe_attr.lower()), custom_value)",
        "begin_line": 334,
        "end_line": 346,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.UserDefinedImagePipeline.test_no_custom_settings_for_subclasses#334",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.UserDefinedImagePipeline",
        "signature": "tests.test_pipeline_images.UserDefinedImagePipeline.test_no_custom_settings_for_subclasses(self)",
        "snippet": "    def test_no_custom_settings_for_subclasses(self):\n        \"\"\"\n        If there are no settings for subclass and no subclass attributes, pipeline should use\n        attributes of base class.\n        \"\"\"\n        class UserDefinedImagePipeline(ImagesPipeline):\n            pass\n\n        user_pipeline = UserDefinedImagePipeline.from_settings(Settings({\"IMAGES_STORE\": self.tempdir}))\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            # Values from settings for custom pipeline should be set on pipeline instance.\n            custom_value = self.default_pipeline_settings.get(pipe_attr.upper())\n            self.assertEqual(getattr(user_pipeline, pipe_attr.lower()), custom_value)",
        "begin_line": 334,
        "end_line": 346,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_custom_settings_for_subclasses#348",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_custom_settings_for_subclasses(self)",
        "snippet": "    def test_custom_settings_for_subclasses(self):\n        \"\"\"\n        If there are custom settings for subclass and NO class attributes, pipeline should use custom\n        settings.\n        \"\"\"\n        class UserDefinedImagePipeline(ImagesPipeline):\n            pass\n\n        prefix = UserDefinedImagePipeline.__name__.upper()\n        settings = self._generate_fake_settings(prefix=prefix)\n        user_pipeline = UserDefinedImagePipeline.from_settings(Settings(settings))\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            # Values from settings for custom pipeline should be set on pipeline instance.\n            custom_value = settings.get(prefix + \"_\" + settings_attr)\n            self.assertNotEqual(custom_value, self.default_pipeline_settings[pipe_attr])\n            self.assertEqual(getattr(user_pipeline, pipe_attr.lower()), custom_value)",
        "begin_line": 348,
        "end_line": 363,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.UserDefinedImagePipeline.test_custom_settings_for_subclasses#348",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.UserDefinedImagePipeline",
        "signature": "tests.test_pipeline_images.UserDefinedImagePipeline.test_custom_settings_for_subclasses(self)",
        "snippet": "    def test_custom_settings_for_subclasses(self):\n        \"\"\"\n        If there are custom settings for subclass and NO class attributes, pipeline should use custom\n        settings.\n        \"\"\"\n        class UserDefinedImagePipeline(ImagesPipeline):\n            pass\n\n        prefix = UserDefinedImagePipeline.__name__.upper()\n        settings = self._generate_fake_settings(prefix=prefix)\n        user_pipeline = UserDefinedImagePipeline.from_settings(Settings(settings))\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            # Values from settings for custom pipeline should be set on pipeline instance.\n            custom_value = settings.get(prefix + \"_\" + settings_attr)\n            self.assertNotEqual(custom_value, self.default_pipeline_settings[pipe_attr])\n            self.assertEqual(getattr(user_pipeline, pipe_attr.lower()), custom_value)",
        "begin_line": 348,
        "end_line": 363,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_custom_settings_and_class_attrs_for_subclasses#365",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_custom_settings_and_class_attrs_for_subclasses(self)",
        "snippet": "    def test_custom_settings_and_class_attrs_for_subclasses(self):\n        \"\"\"\n        If there are custom settings for subclass AND class attributes\n        setting keys are preferred and override attributes.\n        \"\"\"\n        pipeline_cls = self._generate_fake_pipeline_subclass()\n        prefix = pipeline_cls.__name__.upper()\n        settings = self._generate_fake_settings(prefix=prefix)\n        user_pipeline = pipeline_cls.from_settings(Settings(settings))\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            custom_value = settings.get(prefix + \"_\" + settings_attr)\n            self.assertNotEqual(custom_value, self.default_pipeline_settings[pipe_attr])\n            self.assertEqual(getattr(user_pipeline, pipe_attr.lower()), custom_value)",
        "begin_line": 365,
        "end_line": 377,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_cls_attrs_with_DEFAULT_prefix#379",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_cls_attrs_with_DEFAULT_prefix(self)",
        "snippet": "    def test_cls_attrs_with_DEFAULT_prefix(self):\n        class UserDefinedImagePipeline(ImagesPipeline):\n            DEFAULT_IMAGES_URLS_FIELD = \"something\"\n            DEFAULT_IMAGES_RESULT_FIELD = \"something_else\"\n        pipeline = UserDefinedImagePipeline.from_settings(Settings({\"IMAGES_STORE\": self.tempdir}))\n        self.assertEqual(pipeline.images_result_field, \"something_else\")\n        self.assertEqual(pipeline.images_urls_field, \"something\")",
        "begin_line": 379,
        "end_line": 385,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.UserDefinedImagePipeline.test_cls_attrs_with_DEFAULT_prefix#379",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.UserDefinedImagePipeline",
        "signature": "tests.test_pipeline_images.UserDefinedImagePipeline.test_cls_attrs_with_DEFAULT_prefix(self)",
        "snippet": "    def test_cls_attrs_with_DEFAULT_prefix(self):\n        class UserDefinedImagePipeline(ImagesPipeline):\n            DEFAULT_IMAGES_URLS_FIELD = \"something\"\n            DEFAULT_IMAGES_RESULT_FIELD = \"something_else\"\n        pipeline = UserDefinedImagePipeline.from_settings(Settings({\"IMAGES_STORE\": self.tempdir}))\n        self.assertEqual(pipeline.images_result_field, \"something_else\")\n        self.assertEqual(pipeline.images_urls_field, \"something\")",
        "begin_line": 379,
        "end_line": 385,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_user_defined_subclass_default_key_names#387",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings",
        "signature": "tests.test_pipeline_images.ImagesPipelineTestCaseCustomSettings.test_user_defined_subclass_default_key_names(self)",
        "snippet": "    def test_user_defined_subclass_default_key_names(self):\n        \"\"\"Test situation when user defines subclass of ImagePipeline,\n        but uses attribute names for default pipeline (without prefixing\n        them with pipeline class name).\n        \"\"\"\n        settings = self._generate_fake_settings()\n\n        class UserPipe(ImagesPipeline):\n            pass\n\n        pipeline_cls = UserPipe.from_settings(Settings(settings))\n\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            expected_value = settings.get(settings_attr)\n            self.assertEqual(getattr(pipeline_cls, pipe_attr.lower()),\n                             expected_value)",
        "begin_line": 387,
        "end_line": 402,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images.UserPipe.test_user_defined_subclass_default_key_names#387",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images.UserPipe",
        "signature": "tests.test_pipeline_images.UserPipe.test_user_defined_subclass_default_key_names(self)",
        "snippet": "    def test_user_defined_subclass_default_key_names(self):\n        \"\"\"Test situation when user defines subclass of ImagePipeline,\n        but uses attribute names for default pipeline (without prefixing\n        them with pipeline class name).\n        \"\"\"\n        settings = self._generate_fake_settings()\n\n        class UserPipe(ImagesPipeline):\n            pass\n\n        pipeline_cls = UserPipe.from_settings(Settings(settings))\n\n        for pipe_attr, settings_attr in self.img_cls_attribute_names:\n            expected_value = settings.get(settings_attr)\n            self.assertEqual(getattr(pipeline_cls, pipe_attr.lower()),\n                             expected_value)",
        "begin_line": 387,
        "end_line": 402,
        "comment": "",
        "is_bug": false
    },
    {
        "name": "tests.test_pipeline_images._create_image#404",
        "src_path": "tests/test_pipeline_images.py",
        "class_name": "tests.test_pipeline_images",
        "signature": "tests.test_pipeline_images._create_image(format, *a, **kw)",
        "snippet": "def _create_image(format, *a, **kw):\n    buf = TemporaryFile()\n    Image.new(*a, **kw).save(buf, format)\n    buf.seek(0)\n    return Image.open(buf)",
        "begin_line": 404,
        "end_line": 408,
        "comment": "",
        "is_bug": false
    }
]