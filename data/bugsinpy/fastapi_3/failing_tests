coverage run -m pytest tests/test_serialize_response_model.py::test_valid
============================= test session starts ==============================
platform linux -- Python 3.8.3, pytest-5.4.3, py-1.8.1, pluggy-0.13.1
rootdir: /home/user/BugsInPy/temp/projects/fastapi
plugins: cov-2.9.0
collected 1 item

tests/test_serialize_response_model.py F                                 [100%]

=================================== FAILURES ===================================
__________________________________ test_valid __________________________________

    def test_valid():
>       response = client.get("/items/valid")

tests/test_serialize_response_model.py:90: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:543: in get
    return self.request('GET', url, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:413: in request
    return super().request(
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:530: in request
    resp = self.send(prep, **send_kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:643: in send
    r = adapter.send(request, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:243: in send
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:240: in send
    loop.run_until_complete(self.app(scope, receive, send))
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/asyncio/base_events.py:616: in run_until_complete
    return future.result()
fastapi/applications.py:149: in __call__
    await super().__call__(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/applications.py:102: in __call__
    await self.middleware_stack(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:181: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:159: in __call__
    await self.app(scope, receive, _send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:82: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:71: in __call__
    await self.app(scope, receive, sender)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:550: in __call__
    await route.handle(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:227: in handle
    await self.app(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:41: in app
    response = await func(request)
fastapi/routing.py:155: in app
    response_data = await serialize_response(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def serialize_response(
        *,
        field: ModelField = None,
        response_content: Any,
        include: Union[SetIntStr, DictIntStrAny] = None,
        exclude: Union[SetIntStr, DictIntStrAny] = set(),
        by_alias: bool = True,
        exclude_unset: bool = False,
        is_coroutine: bool = True,
    ) -> Any:
        if field:
            errors = []
            if exclude_unset and isinstance(response_content, BaseModel):
                if PYDANTIC_1:
                    response_content = response_content.dict(exclude_unset=exclude_unset)
                else:
                    response_content = response_content.dict(
                        skip_defaults=exclude_unset
                    )  # pragma: nocover
            if is_coroutine:
                value, errors_ = field.validate(response_content, {}, loc=("response",))
            else:
                value, errors_ = await run_in_threadpool(
                    field.validate, response_content, {}, loc=("response",)
                )
            if isinstance(errors_, ErrorWrapper):
                errors.append(errors_)
            elif isinstance(errors_, list):
                errors.extend(errors_)
            if errors:
>               raise ValidationError(errors, field.type_)
E               pydantic.error_wrappers.ValidationError: 1 validation error for Item
E               response -> aliased_name
E                 field required (type=value_error.missing)

fastapi/routing.py:81: ValidationError
=============================== warnings summary ===============================
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
  /opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10: DeprecationWarning: "@coroutine" decorator is deprecated since Python 3.8, use "async def" instead
    def run(*args, loop=None, executor=None, **kwargs):

-- Docs: https://docs.pytest.org/en/latest/warnings.html
=========================== short test summary info ============================
FAILED tests/test_serialize_response_model.py::test_valid - pydantic.error_wr...
======================== 1 failed, 6 warnings in 0.75s =========================

coverage run -m pytest tests/test_serialize_response_model.py::test_coerce
============================= test session starts ==============================
platform linux -- Python 3.8.3, pytest-5.4.3, py-1.8.1, pluggy-0.13.1
rootdir: /home/user/BugsInPy/temp/projects/fastapi
plugins: cov-2.9.0
collected 1 item

tests/test_serialize_response_model.py F                                 [100%]

=================================== FAILURES ===================================
_________________________________ test_coerce __________________________________

    def test_coerce():
>       response = client.get("/items/coerce")

tests/test_serialize_response_model.py:96: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:543: in get
    return self.request('GET', url, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:413: in request
    return super().request(
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:530: in request
    resp = self.send(prep, **send_kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:643: in send
    r = adapter.send(request, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:243: in send
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:240: in send
    loop.run_until_complete(self.app(scope, receive, send))
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/asyncio/base_events.py:616: in run_until_complete
    return future.result()
fastapi/applications.py:149: in __call__
    await super().__call__(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/applications.py:102: in __call__
    await self.middleware_stack(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:181: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:159: in __call__
    await self.app(scope, receive, _send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:82: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:71: in __call__
    await self.app(scope, receive, sender)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:550: in __call__
    await route.handle(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:227: in handle
    await self.app(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:41: in app
    response = await func(request)
fastapi/routing.py:155: in app
    response_data = await serialize_response(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def serialize_response(
        *,
        field: ModelField = None,
        response_content: Any,
        include: Union[SetIntStr, DictIntStrAny] = None,
        exclude: Union[SetIntStr, DictIntStrAny] = set(),
        by_alias: bool = True,
        exclude_unset: bool = False,
        is_coroutine: bool = True,
    ) -> Any:
        if field:
            errors = []
            if exclude_unset and isinstance(response_content, BaseModel):
                if PYDANTIC_1:
                    response_content = response_content.dict(exclude_unset=exclude_unset)
                else:
                    response_content = response_content.dict(
                        skip_defaults=exclude_unset
                    )  # pragma: nocover
            if is_coroutine:
                value, errors_ = field.validate(response_content, {}, loc=("response",))
            else:
                value, errors_ = await run_in_threadpool(
                    field.validate, response_content, {}, loc=("response",)
                )
            if isinstance(errors_, ErrorWrapper):
                errors.append(errors_)
            elif isinstance(errors_, list):
                errors.extend(errors_)
            if errors:
>               raise ValidationError(errors, field.type_)
E               pydantic.error_wrappers.ValidationError: 1 validation error for Item
E               response -> aliased_name
E                 field required (type=value_error.missing)

fastapi/routing.py:81: ValidationError
=============================== warnings summary ===============================
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
  /opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10: DeprecationWarning: "@coroutine" decorator is deprecated since Python 3.8, use "async def" instead
    def run(*args, loop=None, executor=None, **kwargs):

-- Docs: https://docs.pytest.org/en/latest/warnings.html
=========================== short test summary info ============================
FAILED tests/test_serialize_response_model.py::test_coerce - pydantic.error_w...
======================== 1 failed, 6 warnings in 0.75s =========================

coverage run -m pytest tests/test_serialize_response_model.py::test_validlist
============================= test session starts ==============================
platform linux -- Python 3.8.3, pytest-5.4.3, py-1.8.1, pluggy-0.13.1
rootdir: /home/user/BugsInPy/temp/projects/fastapi
plugins: cov-2.9.0
collected 1 item

tests/test_serialize_response_model.py F                                 [100%]

=================================== FAILURES ===================================
________________________________ test_validlist ________________________________

    def test_validlist():
>       response = client.get("/items/validlist")

tests/test_serialize_response_model.py:106: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:543: in get
    return self.request('GET', url, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:413: in request
    return super().request(
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:530: in request
    resp = self.send(prep, **send_kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:643: in send
    r = adapter.send(request, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:243: in send
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:240: in send
    loop.run_until_complete(self.app(scope, receive, send))
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/asyncio/base_events.py:616: in run_until_complete
    return future.result()
fastapi/applications.py:149: in __call__
    await super().__call__(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/applications.py:102: in __call__
    await self.middleware_stack(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:181: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:159: in __call__
    await self.app(scope, receive, _send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:82: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:71: in __call__
    await self.app(scope, receive, sender)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:550: in __call__
    await route.handle(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:227: in handle
    await self.app(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:41: in app
    response = await func(request)
fastapi/routing.py:155: in app
    response_data = await serialize_response(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def serialize_response(
        *,
        field: ModelField = None,
        response_content: Any,
        include: Union[SetIntStr, DictIntStrAny] = None,
        exclude: Union[SetIntStr, DictIntStrAny] = set(),
        by_alias: bool = True,
        exclude_unset: bool = False,
        is_coroutine: bool = True,
    ) -> Any:
        if field:
            errors = []
            if exclude_unset and isinstance(response_content, BaseModel):
                if PYDANTIC_1:
                    response_content = response_content.dict(exclude_unset=exclude_unset)
                else:
                    response_content = response_content.dict(
                        skip_defaults=exclude_unset
                    )  # pragma: nocover
            if is_coroutine:
                value, errors_ = field.validate(response_content, {}, loc=("response",))
            else:
                value, errors_ = await run_in_threadpool(
                    field.validate, response_content, {}, loc=("response",)
                )
            if isinstance(errors_, ErrorWrapper):
                errors.append(errors_)
            elif isinstance(errors_, list):
                errors.extend(errors_)
            if errors:
>               raise ValidationError(errors, field.type_)
E               pydantic.error_wrappers.ValidationError: 3 validation errors for Item
E               response -> 0 -> aliased_name
E                 field required (type=value_error.missing)
E               response -> 1 -> aliased_name
E                 field required (type=value_error.missing)
E               response -> 2 -> aliased_name
E                 field required (type=value_error.missing)

fastapi/routing.py:81: ValidationError
=============================== warnings summary ===============================
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
  /opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10: DeprecationWarning: "@coroutine" decorator is deprecated since Python 3.8, use "async def" instead
    def run(*args, loop=None, executor=None, **kwargs):

-- Docs: https://docs.pytest.org/en/latest/warnings.html
=========================== short test summary info ============================
FAILED tests/test_serialize_response_model.py::test_validlist - pydantic.erro...
======================== 1 failed, 6 warnings in 1.03s =========================

coverage run -m pytest tests/test_serialize_response_model.py::test_validdict
============================= test session starts ==============================
platform linux -- Python 3.8.3, pytest-5.4.3, py-1.8.1, pluggy-0.13.1
rootdir: /home/user/BugsInPy/temp/projects/fastapi
plugins: cov-2.9.0
collected 1 item

tests/test_serialize_response_model.py F                                 [100%]

=================================== FAILURES ===================================
________________________________ test_validdict ________________________________

    def test_validdict():
>       response = client.get("/items/validdict")

tests/test_serialize_response_model.py:116: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:543: in get
    return self.request('GET', url, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:413: in request
    return super().request(
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:530: in request
    resp = self.send(prep, **send_kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:643: in send
    r = adapter.send(request, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:243: in send
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:240: in send
    loop.run_until_complete(self.app(scope, receive, send))
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/asyncio/base_events.py:616: in run_until_complete
    return future.result()
fastapi/applications.py:149: in __call__
    await super().__call__(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/applications.py:102: in __call__
    await self.middleware_stack(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:181: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:159: in __call__
    await self.app(scope, receive, _send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:82: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:71: in __call__
    await self.app(scope, receive, sender)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:550: in __call__
    await route.handle(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:227: in handle
    await self.app(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:41: in app
    response = await func(request)
fastapi/routing.py:155: in app
    response_data = await serialize_response(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def serialize_response(
        *,
        field: ModelField = None,
        response_content: Any,
        include: Union[SetIntStr, DictIntStrAny] = None,
        exclude: Union[SetIntStr, DictIntStrAny] = set(),
        by_alias: bool = True,
        exclude_unset: bool = False,
        is_coroutine: bool = True,
    ) -> Any:
        if field:
            errors = []
            if exclude_unset and isinstance(response_content, BaseModel):
                if PYDANTIC_1:
                    response_content = response_content.dict(exclude_unset=exclude_unset)
                else:
                    response_content = response_content.dict(
                        skip_defaults=exclude_unset
                    )  # pragma: nocover
            if is_coroutine:
                value, errors_ = field.validate(response_content, {}, loc=("response",))
            else:
                value, errors_ = await run_in_threadpool(
                    field.validate, response_content, {}, loc=("response",)
                )
            if isinstance(errors_, ErrorWrapper):
                errors.append(errors_)
            elif isinstance(errors_, list):
                errors.extend(errors_)
            if errors:
>               raise ValidationError(errors, field.type_)
E               pydantic.error_wrappers.ValidationError: 3 validation errors for Item
E               response -> k1 -> aliased_name
E                 field required (type=value_error.missing)
E               response -> k2 -> aliased_name
E                 field required (type=value_error.missing)
E               response -> k3 -> aliased_name
E                 field required (type=value_error.missing)

fastapi/routing.py:81: ValidationError
=============================== warnings summary ===============================
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
  /opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10: DeprecationWarning: "@coroutine" decorator is deprecated since Python 3.8, use "async def" instead
    def run(*args, loop=None, executor=None, **kwargs):

-- Docs: https://docs.pytest.org/en/latest/warnings.html
=========================== short test summary info ============================
FAILED tests/test_serialize_response_model.py::test_validdict - pydantic.erro...
======================== 1 failed, 6 warnings in 0.84s =========================

coverage run -m pytest tests/test_serialize_response_model.py::test_valid_exclude_unset
============================= test session starts ==============================
platform linux -- Python 3.8.3, pytest-5.4.3, py-1.8.1, pluggy-0.13.1
rootdir: /home/user/BugsInPy/temp/projects/fastapi
plugins: cov-2.9.0
collected 1 item

tests/test_serialize_response_model.py F                                 [100%]

=================================== FAILURES ===================================
___________________________ test_valid_exclude_unset ___________________________

    def test_valid_exclude_unset():
>       response = client.get("/items/valid-exclude-unset")

tests/test_serialize_response_model.py:126: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:543: in get
    return self.request('GET', url, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:413: in request
    return super().request(
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:530: in request
    resp = self.send(prep, **send_kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:643: in send
    r = adapter.send(request, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:243: in send
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:240: in send
    loop.run_until_complete(self.app(scope, receive, send))
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/asyncio/base_events.py:616: in run_until_complete
    return future.result()
fastapi/applications.py:149: in __call__
    await super().__call__(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/applications.py:102: in __call__
    await self.middleware_stack(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:181: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:159: in __call__
    await self.app(scope, receive, _send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:82: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:71: in __call__
    await self.app(scope, receive, sender)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:550: in __call__
    await route.handle(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:227: in handle
    await self.app(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:41: in app
    response = await func(request)
fastapi/routing.py:155: in app
    response_data = await serialize_response(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def serialize_response(
        *,
        field: ModelField = None,
        response_content: Any,
        include: Union[SetIntStr, DictIntStrAny] = None,
        exclude: Union[SetIntStr, DictIntStrAny] = set(),
        by_alias: bool = True,
        exclude_unset: bool = False,
        is_coroutine: bool = True,
    ) -> Any:
        if field:
            errors = []
            if exclude_unset and isinstance(response_content, BaseModel):
                if PYDANTIC_1:
                    response_content = response_content.dict(exclude_unset=exclude_unset)
                else:
                    response_content = response_content.dict(
                        skip_defaults=exclude_unset
                    )  # pragma: nocover
            if is_coroutine:
                value, errors_ = field.validate(response_content, {}, loc=("response",))
            else:
                value, errors_ = await run_in_threadpool(
                    field.validate, response_content, {}, loc=("response",)
                )
            if isinstance(errors_, ErrorWrapper):
                errors.append(errors_)
            elif isinstance(errors_, list):
                errors.extend(errors_)
            if errors:
>               raise ValidationError(errors, field.type_)
E               pydantic.error_wrappers.ValidationError: 1 validation error for Item
E               response -> aliased_name
E                 field required (type=value_error.missing)

fastapi/routing.py:81: ValidationError
=============================== warnings summary ===============================
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
  /opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10: DeprecationWarning: "@coroutine" decorator is deprecated since Python 3.8, use "async def" instead
    def run(*args, loop=None, executor=None, **kwargs):

-- Docs: https://docs.pytest.org/en/latest/warnings.html
=========================== short test summary info ============================
FAILED tests/test_serialize_response_model.py::test_valid_exclude_unset - pyd...
======================== 1 failed, 6 warnings in 0.84s =========================

coverage run -m pytest tests/test_serialize_response_model.py::test_coerce_exclude_unset
============================= test session starts ==============================
platform linux -- Python 3.8.3, pytest-5.4.3, py-1.8.1, pluggy-0.13.1
rootdir: /home/user/BugsInPy/temp/projects/fastapi
plugins: cov-2.9.0
collected 1 item

tests/test_serialize_response_model.py F                                 [100%]

=================================== FAILURES ===================================
__________________________ test_coerce_exclude_unset ___________________________

    def test_coerce_exclude_unset():
>       response = client.get("/items/coerce-exclude-unset")

tests/test_serialize_response_model.py:132: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:543: in get
    return self.request('GET', url, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:413: in request
    return super().request(
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:530: in request
    resp = self.send(prep, **send_kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:643: in send
    r = adapter.send(request, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:243: in send
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:240: in send
    loop.run_until_complete(self.app(scope, receive, send))
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/asyncio/base_events.py:616: in run_until_complete
    return future.result()
fastapi/applications.py:149: in __call__
    await super().__call__(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/applications.py:102: in __call__
    await self.middleware_stack(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:181: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:159: in __call__
    await self.app(scope, receive, _send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:82: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:71: in __call__
    await self.app(scope, receive, sender)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:550: in __call__
    await route.handle(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:227: in handle
    await self.app(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:41: in app
    response = await func(request)
fastapi/routing.py:155: in app
    response_data = await serialize_response(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def serialize_response(
        *,
        field: ModelField = None,
        response_content: Any,
        include: Union[SetIntStr, DictIntStrAny] = None,
        exclude: Union[SetIntStr, DictIntStrAny] = set(),
        by_alias: bool = True,
        exclude_unset: bool = False,
        is_coroutine: bool = True,
    ) -> Any:
        if field:
            errors = []
            if exclude_unset and isinstance(response_content, BaseModel):
                if PYDANTIC_1:
                    response_content = response_content.dict(exclude_unset=exclude_unset)
                else:
                    response_content = response_content.dict(
                        skip_defaults=exclude_unset
                    )  # pragma: nocover
            if is_coroutine:
                value, errors_ = field.validate(response_content, {}, loc=("response",))
            else:
                value, errors_ = await run_in_threadpool(
                    field.validate, response_content, {}, loc=("response",)
                )
            if isinstance(errors_, ErrorWrapper):
                errors.append(errors_)
            elif isinstance(errors_, list):
                errors.extend(errors_)
            if errors:
>               raise ValidationError(errors, field.type_)
E               pydantic.error_wrappers.ValidationError: 1 validation error for Item
E               response -> aliased_name
E                 field required (type=value_error.missing)

fastapi/routing.py:81: ValidationError
=============================== warnings summary ===============================
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
  /opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10: DeprecationWarning: "@coroutine" decorator is deprecated since Python 3.8, use "async def" instead
    def run(*args, loop=None, executor=None, **kwargs):

-- Docs: https://docs.pytest.org/en/latest/warnings.html
=========================== short test summary info ============================
FAILED tests/test_serialize_response_model.py::test_coerce_exclude_unset - py...
======================== 1 failed, 6 warnings in 0.75s =========================

coverage run -m pytest tests/test_serialize_response_model.py::test_validlist_exclude_unset
============================= test session starts ==============================
platform linux -- Python 3.8.3, pytest-5.4.3, py-1.8.1, pluggy-0.13.1
rootdir: /home/user/BugsInPy/temp/projects/fastapi
plugins: cov-2.9.0
collected 1 item

tests/test_serialize_response_model.py F                                 [100%]

=================================== FAILURES ===================================
_________________________ test_validlist_exclude_unset _________________________

    def test_validlist_exclude_unset():
>       response = client.get("/items/validlist-exclude-unset")

tests/test_serialize_response_model.py:138: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:543: in get
    return self.request('GET', url, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:413: in request
    return super().request(
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:530: in request
    resp = self.send(prep, **send_kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:643: in send
    r = adapter.send(request, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:243: in send
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:240: in send
    loop.run_until_complete(self.app(scope, receive, send))
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/asyncio/base_events.py:616: in run_until_complete
    return future.result()
fastapi/applications.py:149: in __call__
    await super().__call__(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/applications.py:102: in __call__
    await self.middleware_stack(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:181: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:159: in __call__
    await self.app(scope, receive, _send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:82: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:71: in __call__
    await self.app(scope, receive, sender)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:550: in __call__
    await route.handle(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:227: in handle
    await self.app(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:41: in app
    response = await func(request)
fastapi/routing.py:155: in app
    response_data = await serialize_response(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def serialize_response(
        *,
        field: ModelField = None,
        response_content: Any,
        include: Union[SetIntStr, DictIntStrAny] = None,
        exclude: Union[SetIntStr, DictIntStrAny] = set(),
        by_alias: bool = True,
        exclude_unset: bool = False,
        is_coroutine: bool = True,
    ) -> Any:
        if field:
            errors = []
            if exclude_unset and isinstance(response_content, BaseModel):
                if PYDANTIC_1:
                    response_content = response_content.dict(exclude_unset=exclude_unset)
                else:
                    response_content = response_content.dict(
                        skip_defaults=exclude_unset
                    )  # pragma: nocover
            if is_coroutine:
                value, errors_ = field.validate(response_content, {}, loc=("response",))
            else:
                value, errors_ = await run_in_threadpool(
                    field.validate, response_content, {}, loc=("response",)
                )
            if isinstance(errors_, ErrorWrapper):
                errors.append(errors_)
            elif isinstance(errors_, list):
                errors.extend(errors_)
            if errors:
>               raise ValidationError(errors, field.type_)
E               pydantic.error_wrappers.ValidationError: 3 validation errors for Item
E               response -> 0 -> aliased_name
E                 field required (type=value_error.missing)
E               response -> 1 -> aliased_name
E                 field required (type=value_error.missing)
E               response -> 2 -> aliased_name
E                 field required (type=value_error.missing)

fastapi/routing.py:81: ValidationError
=============================== warnings summary ===============================
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
  /opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10: DeprecationWarning: "@coroutine" decorator is deprecated since Python 3.8, use "async def" instead
    def run(*args, loop=None, executor=None, **kwargs):

-- Docs: https://docs.pytest.org/en/latest/warnings.html
=========================== short test summary info ============================
FAILED tests/test_serialize_response_model.py::test_validlist_exclude_unset
======================== 1 failed, 6 warnings in 0.75s =========================

coverage run -m pytest tests/test_serialize_response_model.py::test_validdict_exclude_unset
============================= test session starts ==============================
platform linux -- Python 3.8.3, pytest-5.4.3, py-1.8.1, pluggy-0.13.1
rootdir: /home/user/BugsInPy/temp/projects/fastapi
plugins: cov-2.9.0
collected 1 item

tests/test_serialize_response_model.py F                                 [100%]

=================================== FAILURES ===================================
_________________________ test_validdict_exclude_unset _________________________

    def test_validdict_exclude_unset():
>       response = client.get("/items/validdict-exclude-unset")

tests/test_serialize_response_model.py:148: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:543: in get
    return self.request('GET', url, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:413: in request
    return super().request(
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:530: in request
    resp = self.send(prep, **send_kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/requests/sessions.py:643: in send
    r = adapter.send(request, **kwargs)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:243: in send
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/testclient.py:240: in send
    loop.run_until_complete(self.app(scope, receive, send))
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/asyncio/base_events.py:616: in run_until_complete
    return future.result()
fastapi/applications.py:149: in __call__
    await super().__call__(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/applications.py:102: in __call__
    await self.middleware_stack(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:181: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/middleware/errors.py:159: in __call__
    await self.app(scope, receive, _send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:82: in __call__
    raise exc from None
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/exceptions.py:71: in __call__
    await self.app(scope, receive, sender)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:550: in __call__
    await route.handle(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:227: in handle
    await self.app(scope, receive, send)
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/starlette/routing.py:41: in app
    response = await func(request)
fastapi/routing.py:155: in app
    response_data = await serialize_response(
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

    async def serialize_response(
        *,
        field: ModelField = None,
        response_content: Any,
        include: Union[SetIntStr, DictIntStrAny] = None,
        exclude: Union[SetIntStr, DictIntStrAny] = set(),
        by_alias: bool = True,
        exclude_unset: bool = False,
        is_coroutine: bool = True,
    ) -> Any:
        if field:
            errors = []
            if exclude_unset and isinstance(response_content, BaseModel):
                if PYDANTIC_1:
                    response_content = response_content.dict(exclude_unset=exclude_unset)
                else:
                    response_content = response_content.dict(
                        skip_defaults=exclude_unset
                    )  # pragma: nocover
            if is_coroutine:
                value, errors_ = field.validate(response_content, {}, loc=("response",))
            else:
                value, errors_ = await run_in_threadpool(
                    field.validate, response_content, {}, loc=("response",)
                )
            if isinstance(errors_, ErrorWrapper):
                errors.append(errors_)
            elif isinstance(errors_, list):
                errors.extend(errors_)
            if errors:
>               raise ValidationError(errors, field.type_)
E               pydantic.error_wrappers.ValidationError: 3 validation errors for Item
E               response -> k1 -> aliased_name
E                 field required (type=value_error.missing)
E               response -> k2 -> aliased_name
E                 field required (type=value_error.missing)
E               response -> k3 -> aliased_name
E                 field required (type=value_error.missing)

fastapi/routing.py:81: ValidationError
=============================== warnings summary ===============================
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
/opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10
  /opt/conda/envs/6d77396cd44c7df1384dad69b48c4335/lib/python3.8/site-packages/aiofiles/os.py:10: DeprecationWarning: "@coroutine" decorator is deprecated since Python 3.8, use "async def" instead
    def run(*args, loop=None, executor=None, **kwargs):

-- Docs: https://docs.pytest.org/en/latest/warnings.html
=========================== short test summary info ============================
FAILED tests/test_serialize_response_model.py::test_validdict_exclude_unset
======================== 1 failed, 6 warnings in 1.09s =========================
